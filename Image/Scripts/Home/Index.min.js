function setNotes(){$("#notes").load("/Content/Text/Notes.txt")}function resetSizeOptions(){$("#size_no_change input").attr("checked",!0);$("#size_no_change").css("background-position","-65px -45px");$("#textbox_width input").val(0);$("#textbox_height input").val(0)}function initOptions(){$("#size_no_change input").attr("checked",!0);$("#textbox_width input").val(0);$("#textbox_height input").val(0);$("#gamma_radio_01 input").attr("checked",!0);$("#gamma_radio_02 input").attr("checked",!1);$("#gamma_radio_03 input").attr("checked",!1);$("#quality_radio_01 input").attr("checked",!0);$("#quality_radio_02 input").attr("checked",!1)}function getOptions(){_options.noAction=!1;var n=$("#textbox_width input").val(),t=$("#textbox_height input").val();isNaN(n)||n==0?isNaN(t)||t==0?(resetSizeOptions(),_options.maxWidth=0,_options.maxHeight=0):(_options.maxHeight=t,_options.maxWidth=0):(_options.maxWidth=n,_options.maxHeight=0);_options.doResize=!$("#size_no_change input").is(":checked");_options.gamma=$("input[name='gamma']:checked").val();_options.quality=$("#quality_radio_02 input").is(":checked")?.8:.92;_options.doResize||_options.gamma!=1||_options.quality!=.92||(_options.noAction=!0)}function openFiles(n){dispProgressWrap(!0);getOptions();var t=0,i=[];$(n).each(function(r,u){if(u.type=="image/jpeg"){var f=new FileReader;f.addEventListener("load",function(r){var f=new Image;f.filename=u.name;f.addEventListener("load",function(){i.push(this);t++;t==n.length&&(_options.noAction?(i.forEach(function(n){_imagedatas.push({data:n.src,filename:n.filename})}),dispProgressWrap(!1),downloadButtonStyle(!0)):loadedImages(i))});f.src=r.target.result});f.readAsDataURL(u)}else t++})}function setDropAreaStyle(n){var t={};t=n?{"background-position":"left bottom"}:{"background-position":"left top"};$("#file_drop_area").css(t)}function setEvents(){$("#file_drop_area").on("dragover",function(n){n.preventDefault()});$("#file_drop_area").on("dragenter",function(n){setDropAreaStyle(!0);n.preventDefault()});$("#file_drop_area").on("dragleave",function(n){setDropAreaStyle(!1);n.preventDefault()});$("#file_drop_area").on("drop",function(n){setDropAreaStyle(!1);n.preventDefault();var t=n.originalEvent.dataTransfer.files;openFiles(t)});$("#dammy_input").click(function(){$("#file_select_button").click()});$("#file_select_button").change(function(){setDropAreaStyle(!1);openFiles(this.files)});$("#download_button").click(function(){saveImages()});$("#size_no_change input").change(function(){$(this).is(":checked")?$("#size_no_change").css("background-position","-65px -45px"):$("#size_no_change").css("background-position","-65px -22px")});$("#textbox_width input").change(function(){$("#size_no_change input").attr("checked",!1);$("#size_no_change").css("background-position","-65px -22px");$("#textbox_height input").val(0)});$("#textbox_width input").keydown(function(){$("#size_no_change input").attr("checked",!1);$("#size_no_change").css("background-position","-65px -22px");$("#textbox_height input").val(0)});$("#textbox_height input").change(function(){$("#size_no_change input").attr("checked",!1);$("#size_no_change").css("background-position","-65px -22px");$("#textbox_width input").val(0)});$("#textbox_height input").keydown(function(){$("#size_no_change input").attr("checked",!1);$("#size_no_change").css("background-position","-65px -22px");$("#textbox_width input").val(0)});$("#option_02 input").change(function(){var n=$(this).data("id"),t=$(this).data("bgX");$("#gamma_radio_01").css("background-position","-65px -22px");$("#gamma_radio_02").css("background-position","-153px -22px");$("#gamma_radio_03").css("background-position","-255px -22px");$("#gamma_radio_"+n).css("background-position",t+" -45px")});$("#option_03 input").change(function(){var n=$(this).data("id"),t=$(this).data("bgX");$("#quality_radio_01").css("background-position","-65px -22px");$("#quality_radio_02").css("background-position","-326px -22px");$("#quality_radio_"+n).css("background-position",t+" -45px")})}function downloadButtonStyle(n){var t={};t=n?{"background-position":"left -213px",cursor:"pointer"}:{"background-position":"left -143px",cursor:"auto"};$("#download_button").css(t);$("#download_button").hover(function(){$(this).css("background-position","left -283px")},function(){$(this).css("background-position","left -213px")})}function saveZip(n){var t=new JSZip,i;n.forEach(function(n){t.file(n.filename,n.data.slice(23),{base64:!0})});i=t.generate({type:"blob"});saveAs(i,"images.zip")}function saveJpeg(n){var t=n[0].canvas;t.toBlob(function(t){saveAs(t,n[0].filename)},"image/jpeg",_options.quality)}function saveImages(){$("#wait_create_files_mask").fadeIn(100);setTimeout(function(){_imagedatas.length==1?saveJpeg(_imagedatas):_imagedatas.length>1&&saveZip(_imagedatas);$("#wait_create_files_mask").fadeOut(100)},100)}function getSize(n){var i=100,t={scale:0,width:_options.maxWidth,height:_options.maxHeight};return _options.doResize?_options.maxWidth>0?n.width>_options.maxWidth?(i=~~((n.width-_options.maxWidth)*.04),t.scale=Math.sqrt((_options.maxWidth+i)/n.width),t.height=~~(n.height/n.width*_options.maxWidth)):n.width==_options.maxWidth?(t.scale=1,t.width=n.width,t.height=n.height):(t.width=_options.maxWidth,t.height=~~(n.height/n.width*_options.maxWidth),t.scale=1):n.height>_options.maxHeight?(i=~~((n.height-_options.maxHeight)*.04),t.scale=Math.sqrt((_options.maxHeight+i)/n.height),t.width=~~(n.width/n.height*_options.maxHeight)):n.height==_options.maxHeight?(t.scale=1,t.width=n.width,t.height=n.height):(t.width=~~(n.width/n.height*_options.maxHeight),t.height=_options.maxHeight,t.scale=1):(t.scale=1,t.width=n.width,t.height=n.height),t}function scaleDown(n,t){var r,u,e,o,f=document.createElement("canvas"),s=f.getContext("2d"),i=document.createElement("canvas"),h=i.getContext("2d");return r=i.width=~~(n.width*t.scale),u=i.height=~~(n.height*t.scale),h.drawImage(n,0,0,r,u),r=~~(i.width*t.scale),u=~~(i.height*t.scale),h.drawImage(i,0,0,r,u),e=~~(i.width*t.scale),o=~~(i.height*t.scale),r=f.width=t.width,u=f.height=t.height,s.drawImage(i,0,0,e,o,0,0,r,u),s.getImageData(0,0,t.width,t.height)}function scaleUp(n,t){var i=document.createElement("canvas"),r=i.getContext("2d");return i.width=t.width,i.height=t.height,r.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)}function scaleChange(n){var t=getSize(n);return t.scale<1?scaleDown(n,t):scaleUp(n,t)}function loadedImages(n){var t=0;downloadButtonStyle(!1);_imagedatas=[];n.forEach(function(i){var u=scaleChange(i),r=new Worker("Scripts/Home/Gamma.js");r.addEventListener("message",function(i){addImagedatas(i.data.imagedata,i.data.filename,++t,n.length)},!1);r.postMessage({imagedata:u,filename:i.filename,gamma:_options.gamma})})}function addImagedatas(n,t,i,r){var u=document.createElement("canvas"),f=u.getContext("2d");u.width=n.width;u.height=n.height;f.putImageData(n,0,0);_imagedatas.push({data:u.toDataURL("image/jpeg",_options.quality),filename:t,canvas:u});progress(i,r)&&(downloadButtonStyle(!0),dispProgressWrap(!1))}function dispProgressWrap(n){n?($("#progress_wrap").show(),$("#progress_bar span").css("width","0px")):$("#progress_wrap").fadeOut(100)}function progress(n,t){var i=~~(n/t*100)*5;return $("#progress_bar span").animate({width:i+"px"},50),n>=t}function resize0(n){var t=[];n.forEach(function(i){var v=i.filename,r=i.width,u=i.height,f,e,c,l,s,o,h,a;r>u?(f=_options.maxWidth,e=u*_options.maxWidth/r):(f=r*_options.maxHeight/u,e=_options.maxHeight);c=!0;l=!0;interpolationPass=!0;s=new Resize(r,u,f,e,l,interpolationPass,c,function(i){var u=document.createElement("canvas"),r,s;u.width=f;u.height=e;var o=u.getContext("2d"),h=o.createImageData(f,e),c=h.data,l=c.length;for(r=0;r<l;++r)c[r]=i[r]&255;o.putImageData(h,0,0);s=o.getImageData(0,0,f,e);s.filename=this.filename;t.push(s);t.length==n.length&&loadedImages2(t)});o=document.createElement("canvas");o.width=r;o.height=u;h=o.getContext("2d");h.drawImage(i,0,0,r,u);a=h.getImageData(0,0,r,u).data;s.filename=i.filename;s.resize(a)})}function loadedImages2(n){var t=[];n.forEach(function(i){var r=new Worker("Scripts/Home/Gamma.js");r.addEventListener("message",function(i){var r=document.createElement("canvas"),u=r.getContext("2d");r.width=i.data.imagedata.width;r.height=i.data.imagedata.height;u.putImageData(i.data.imagedata,0,0);t.push({data:r.toDataURL("image/jpeg",_options.quality).slice(23),filename:"min_"+i.data.filename});_progress++;_progress==n.length&&saveZip(t);$("#progress").text(_progress)},!1);r.postMessage({imagedata:i,filename:i.filename,gamma:_options.gamma})})}function scaleDown0(n){var i=document.createElement("canvas"),t=i.getContext("2d"),r;return i.width=500,i.height=299,t.drawImage(n,0,0,i.width,i.height),r=!1,t.msImageSmoothingEnabled=r,t.mozImageSmoothingEnabled=r,t.webkitImageSmoothingEnabled=r,t.imageSmoothingEnabled=r,t.getImageData(0,0,500,299)}function brightness(n){for(var i=2.5,t=0;t<n.data.length;t=t+4)n.data[t+0]=~~(255*Math.pow(n.data[t+0]/255,1/i)),n.data[t+1]=~~(255*Math.pow(n.data[t+1]/255,1/i)),n.data[t+2]=~~(255*Math.pow(n.data[t+2]/255,1/i)),n.data[t+3]=n.data[t+3];return n}function resize(n,t,i){var r={width:t,height:i};return t!=0&&(r.width=t,r.height=~~(n.height/n.width*t)),i!=0&&(r.height=i,r.width=~~(n.width/n.height*i)),r}function scaleDown2(n){var t=document.createElement("canvas"),r=t.getContext("2d"),i=resize(n,MAX_WIDTH,MAX_HEIGHT);return t.width=i.width,t.height=i.height,r.drawImage(n,0,0,i.width,i.height),t}function scaleDown3(n,t,i){var u=getSize(n,t,i),e=document.createElement("canvas"),o=e.getContext("2d"),r=document.createElement("canvas"),f=r.getContext("2d");return r.width=~~(n.width*u.scale),r.height=~~(n.height*u.scale),f.drawImage(n,0,0,r.width,r.height),f.drawImage(r,0,0,~~(r.width*u.scale),~~(r.height*u.scale),0,0,500,299),r}var _options={noAction:!1,doResize:!1,maxWidth:0,maxHeight:0,gamma:1,quality:1},_imagedatas=[];$(function(){setNotes();initOptions();setEvents()});
/*
//# sourceMappingURL=Index.min.js.map
*/